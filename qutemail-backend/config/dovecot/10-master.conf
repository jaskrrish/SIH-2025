##
## Master process configuration
##

service imap-login {
  inet_listener imap {
    port = 143
  }

  inet_listener imaps {
    port = 993
    ssl = yes
  }
}

service lmtp {
  # LMTP socket for Postfix local delivery
  unix_listener /var/spool/postfix/private/dovecot-lmtp {
    mode = 0600
    user = postfix
    group = postfix
  }

  # LMTP over TCP for Docker networking
  inet_listener lmtp {
    address = *
    port = 24
  }
}

service auth {
  # Postfix SASL authentication socket
  unix_listener /var/spool/postfix/private/auth {
    mode = 0660
    user = postfix
    group = postfix
  }

  # Auth socket for LMTP
  unix_listener auth-userdb {
    mode = 0600
    user = vmail
    group = vmail
  }
}

service auth-worker {
  # Auth worker process
  user = vmail
}

service dict {
  # Dict server
  unix_listener dict {
    mode = 0600
    user = vmail
    group = vmail
  }
}
